<div>
  <h1>
    新建合同
  </h1>

  <form class="form-horizontal" role="form" name="newContract">
    <div class="form-group">
      <label for="contract-number" class="col-sm-2 control-label">合同编号：</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" placeholder="请输入合同号" [(ngModel)]="contract.contractNumber" required
          name="contractNumber">
      </div>
    </div>

    <div class="form-group">
      <label for="contract-first-party" class="col-sm-2 control-label">甲方（付款方）：</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" placeholder="甲方" [(ngModel)]="contract.firstParty" required name="firstParty">
      </div>
    </div>

    <div class="form-group">
      <label for="contract-second-party" class="col-sm-2 control-label">乙方（收款方）</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" placeholder="乙方" [(ngModel)]="contract.secondParty" required name="secondParty">
      </div>
    </div>

    <div class="form-group">
      <label for="contract-start-time" class="col-sm-2 control-label">合同签订时间</label>
      <div class="col-sm-10">
        <input type="date" class="form-control" [(ngModel)]="contract.startTime" required name="startTime">
      </div>
    </div>

    <div class="form-group">
      <label for="contract-car-type" class="col-sm-2 control-label">车型</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" placeholder="请输入车型" [(ngModel)]="contract.carType" required name="carType">
      </div>
    </div>

    <div class="form-group">
      <label for="contract-car-quantity" class="col-sm-2 control-label">数量</label>
      <div class="col-sm-10">
        <input type="number" class="form-control" placeholder="请输入数量" [(ngModel)]="contract.quantity" required name="quantity">
      </div>
    </div>

    <div class="form-group">
      <label for="contract-stage-sum" class="col-sm-2 control-label">合同总金额</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" placeholder="请输入总金额" [(ngModel)]="contract.amountSum" required name="amountSum">
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">付款方式</label>
    </div>


    <!-- 期数 -->
    <div class="col-lg-10">
      <table class="table table-condensed">
        <thead>
          <tr class="font-weight-bold">
            <th>期数</th>
            <th>金额</th>
            <th>时间</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="">
              {{contract.stages.length+1}}
            </td>
            <td class="">
              <input type="input" class="form-control" [(ngModel)]="newStageData.amount" name="amount" required>
            </td>
            <td class="">
              <div class="input-group">
                <input class="form-control" placeholder="yyyy-mm-dd" name="dp" [(ngModel)]="newStageData.time" ngbDatepicker #d="ngbDatepicker" required>
                <div class="input-group-append">
                  <button class="btn btn-default btn-sm" (click)="d.toggle()" type="button"><span class="glyphicon glyphicon-calendar"></span></button>
                </div>
              </div>
            </td>
            <td class=""><button type="button" class="btn btn-success" (click)="addNewStage(newStageData)">添加</button></td>
          </tr>
          <tr *ngFor="let st of contract.stages; let row_n = index">
            <td class="">{{row_n + 1}}</td>
            <td class="">{{st.amount}}</td>
            <td class="">{{st.time}}</td>
            <td class=""><button type="button" class="btn btn-danger" (click)="addNewStage(st,true)">删除</button></td>
          </tr>
        </tbody>
      </table>

    </div>

    <div class="row col-lg-7">
      <div class="col-lg-2">
        <input type="button" class="btn btn-dark" (click)="addNewContract()" value="添加" />
      </div>
      <div class="col-lg-2">
        <input type="button" class="btn btn-danger" id="delete-stage" value="删除" />
      </div>
    </div>


    <div class="form-group">
      <label for="amount-sum" class="col-sm-2 control-label">付款总计</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" disabled="disabled" [(ngModel)]="contract.stageSum" required name="stageSum">
      </div>
    </div>



    <div *ngIf="alertText != ''" class="alert alert-danger col-lg-10" role="alert" id="alertLabel">
      {{alertText}}
    </div>


    <div>
      <input type="button" class="btn btn-success" id="add-new" value="确认录入" />
    </div>

  </form>
</div>

